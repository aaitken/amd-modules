// Generated by CoffeeScript 1.3.1
(function(){define(["../interface/interface","../pubsub/pubsub"],function(a,b){var c,d;d=new a("publisher",["publish"]);a.ensureImplements(b,d);c=function(){function a(a){this.source=a;this.times=[];this._request()}a.prototype._request=function(){var a,b=this;this.times.push(+(new Date));if(this.times.length>2)return this._report();a=document.createElement("img");a.onload=function(){return b._request.call(b)};return a.src=this.source+"?"+Math.random()+"="+new Date};a.prototype._report=function(){var a,c,d;d=this.times;a=d[2]-d[1];c=d[1]-d[0]-a;return b.publish("ConnectionStats.numbers",{rtt:a,tcp:c})};return a}();return c})}).call(this);